<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">


<!-- 
     THIS FILE HAS BEEN AUTOMATICALLY GENERATED BY A PERL SCRIPT
     THE SOURCE FILE HAS THE EXTENSION .tmpl
     TO EDIT THE CONTENT OF THIS WEB PAGE, EDIT THE .tmpl FILE
     AND RERUN THE INSTALLATION SCRIPT
       /anfs/www/html/UoCCL/template/install.pl

     FOR DETAILS SEE THIS FILE:
       /anfs/www/html/UoCCL/template/README
-->




<title>Computer Laboratory - ARM Reference
</title>

<link rel="stylesheet" type="text/css" href="arm_ref_files/camstyle.css">

</head><body link="#003399" text="#000000" vlink="#cc3333" alink="#cc0000" bgcolor="#ffffff">

<!-- header -->
<table summary="navigation bar" width="98%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr>
<td width="98%" bgcolor="#0099cc"><img src="arm_ref_files/pixel.gif" class="block" alt="" height="16" width="1" border="0"></td>
<td rowspan="2" width="212" align="right">
<table summary="navigation bar insert" width="212" border="0" cellpadding="0" cellspacing="0">
<tbody><tr>
  <td><a href="http://www.cl.cam.ac.uk/"><img src="arm_ref_files/home.gif" alt="home" class="block" height="18" width="53" border="0"></a></td>
  <td><a href="http://www.cl.cam.ac.uk/UoCCL/localsearch.html"><img src="arm_ref_files/search.gif" alt="search" class="block" height="18" width="53" border="0"></a></td>
  <td><a href="http://www.cl.cam.ac.uk/UoCCL/az.html"><img src="arm_ref_files/az.gif" alt="a-z" class="block" height="18" width="53" border="0"></a></td>
  <td><a href="http://www.cl.cam.ac.uk/UoCCL/help.html"><img src="arm_ref_files/help.gif" alt="help" class="block" height="18" width="53" border="0"></a></td>
</tr>
</tbody></table>
</td>
</tr>
<tr>
<td bgcolor="#cccccc"><img src="arm_ref_files/pixel.gif" class="block" alt="" height="2" width="1" border="0"></td>
</tr>
</tbody></table>
<table summary="departmental header" width="98%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr>
<!-- <td><a href="/"><img src="/UoCCL/img/UoCCL.gif" width="192"
height="62" border="0" alt="University of Cambridge" /></a></td> -->
<td><a href="http://www.cam.ac.uk/"><img src="arm_ref_files/identifier2.gif" alt="University of Cambridge" height="46" width="192" border="0"></a></td>

<!--Departmental name in next cell-->
<td class="title" valign="bottom" align="right">Computer Laboratory<br>ARM Reference
</td>
</tr>

<tr><td colspan="3" bgcolor="#0099cc"><img src="arm_ref_files/pixel.gif" class="block" alt="" height="4" width="1"></td>
</tr>
<tr><td colspan="3" bgcolor="#cccccc"><img src="arm_ref_files/pixel.gif" class="block" alt="" height="2" width="1"></td>
</tr>
</tbody></table>
<!-- end header -->

<!-- breadcrumbs start -->
<table summary="breadcrumb navigation" width="98%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr>
<!--Insert Department home page ref in breadcrumbs-->
<td><a href="http://www.cl.cam.ac.uk/" class="bread">Computer&nbsp;Laboratory</a>&nbsp;&gt;&nbsp;<a href="http://www.cl.cam.ac.uk/Teaching/2005/" class="bread">Course&nbsp;material&nbsp;2005-06</a>&nbsp;&gt;&nbsp;<a href="http://www.cl.cam.ac.uk/teaching/2006/ECADArch/index.html" class="bread">ECAD&nbsp;and&nbsp;Architecture&nbsp;Main&nbsp;Page</a>&nbsp;&gt;&nbsp;<a href="http://www.cl.cam.ac.uk/teaching/2006/ECADArch/arm_ref.html" class="bread">ARM&nbsp;Reference
</a></td>
</tr>
</tbody></table>
<!-- end breadcrumbs -->

<!-- body text -->
<br>
<!-- <h1>ARM Reference
</h1> -->
<table summary="content panel" width="98%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr>
<td valign="top">
<!-- END OF STANDARD HEADER-->
<!-- content -->
	For more info, see the <a href="http://www.cl.cam.ac.uk/teaching/2006/ECADArch/datasheets/arm.pdf">ARM922T DATASHEET</a><br>
	and the <a href="http://www.cl.cam.ac.uk/teaching/2006/ECADArch/datasheets/arm_quick.pdf">ARM QUICK REFERENCE</a><br>
	<br>
<br>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr><td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" bgcolor="#0099cc"></td>
	<td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" width="2"></td>
</tr>
<tr>
	<td width="2" bgcolor="#0099cc"></td>
	<td>&nbsp;&nbsp;<font face="Arial" size="4">Background
	</font></td>
	<td width="2" bgcolor="#0099cc"></td><td width="2" bgcolor="#cccccc"></td>
</tr>
<tr>
	<td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" bgcolor="#0099cc"></td>
	<td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" width="2" bgcolor="#cccccc"></td>
</tr>
<tr>
	<td height="2" width="2"></td>
	<td height="2" bgcolor="#cccccc"></td>
	<td height="2" width="2" bgcolor="#cccccc"></td>
	<td height="2" width="2" bgcolor="#cccccc"></td>
</tr>
</tbody></table>
<br>	<p>ARM Instructions work on 32 bit registers. There are 16 of 
these, numbered r0 to r15. A few of them have special uses, the main 
ones being: r15(Program Counter),r14(Return Address),r13(Stack Pointer).
 They can also be specified using special register names 
(r15=pc,r14=lr,r13=sp). Each instruction may be executed on some 
condition, and most may also update the condition flags (by adding an 
'S' to the end of the instruction).</p>
	<h4>Condition Values</h4>
	<center><img src="arm_ref_files/arm_cond.png"></center><br>
	<br>
<br>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr><td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" bgcolor="#0099cc"></td>
	<td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" width="2"></td>
</tr>
<tr>
	<td width="2" bgcolor="#0099cc"></td>
	<td>&nbsp;&nbsp;<font face="Arial" size="4">Instructions
	</font></td>
	<td width="2" bgcolor="#0099cc"></td><td width="2" bgcolor="#cccccc"></td>
</tr>
<tr>
	<td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" bgcolor="#0099cc"></td>
	<td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" width="2" bgcolor="#cccccc"></td>
</tr>
<tr>
	<td height="2" width="2"></td>
	<td height="2" bgcolor="#cccccc"></td>
	<td height="2" width="2" bgcolor="#cccccc"></td>
	<td height="2" width="2" bgcolor="#cccccc"></td>
</tr>
</tbody></table>
<br>	<p>Here is a list of some of the most commonly used instructions, and meanings for them:</p>
<table border="0" cellpadding="0" cellspacing="4">
<tbody><tr><td> <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code></td><td></td></tr>
<tr><td><code>MOV r0,r1</code></td><td>Move r1 to r0</td></tr>
<tr><td><code>MOV r0,r1,LSL #2</code></td><td>Move r1 to r0, and shift it left by 2</td></tr>
<tr><td><code>MOV r0,r1,LSR r2</code></td><td>Move r1 to r0, and shift it right r2 times</td></tr>
<tr><td><code>MOV r0,#42</code></td><td>Move the number 42 to r0 (This only works for some numbers)</td></tr>
<tr><td><code>LDR r0,=42</code></td><td>Move the number 42 to r0 (This works for all numbers)</td></tr>
<tr><td><code>LDR r0,=my_table</code></td><td>Move the address of 'my_table' to r0</td></tr>
<tr><td><code>ADD r0,r1,r2</code></td><td>Add r1 to r2 and put the result in r0</td></tr>
<tr><td><code>SUB r0,r1,r2</code></td><td>Subtract r2 from r1 and put the result in r0</td></tr>
<tr><td><code>MUL r0,r1,r2</code></td><td>Multiply r1 by r2 and put the 
result in r0. You are not allowed to use the same register for the first
 and second arguments. Strangely though, you may use the same register 
for the first and third without problems.</td></tr>
<tr><td><code>CMP r0,r1</code></td><td>Compare r0 to r1 and update the flags</td></tr>
<tr><td><code>B my_label</code></td><td>Start executing the code at my_label</td></tr>
<tr><td><code>BL my_function</code></td><td>Branch and link. Executes code at my_function, but saves the next instruction's location to r14. Used for function calls.</td></tr>
<tr><td><code>MOV r15,r14</code></td><td>Returns from a function</td></tr>
<tr><td><code>BEQ my_label</code></td><td>Start executing the code at 
my_label IF on the previous comparison, the two values equaled each 
other. If the comparison was instead 'MOVS r0,r1' or similar, it will 
branch if r1 equalled zero.</td></tr>
<tr><td><code>LDR r0,[r1]</code></td><td>Put the contents of memory location r1 into r0. the bottom two bits of r1 must be 0.</td></tr>
<tr><td><code>LDRB r0,[r1]</code></td><td>Put the contents of the byte at memory location r1 into r0.</td></tr>
<tr><td><code>STR r0,[r1]</code></td><td>Put r0 at memory location r1. the bottom two bits of r1 must be 0.</td></tr>
<tr><td><code>STRB r0,[r1]</code></td><td>Put the least significant byte of r0 at memory location r1</td></tr>
<tr><td><code>STMFD sp!,{r4,r5}</code></td><td>Push r4 and r5 onto the 
stack. Note: registers are pushed in their numerical order. NOT the 
order you specify them in this instruction</td></tr>
<tr><td><code>LDMFD sp!,{r4,r5}</code></td><td>Pop r4 and r5 off the 
stack. Note: registers are popped in their numerical order. NOT the 
order you specify them in this instruction</td></tr>
</tbody></table>
<br>
<br>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr><td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" bgcolor="#0099cc"></td>
	<td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" width="2"></td>
</tr>
<tr>
	<td width="2" bgcolor="#0099cc"></td>
	<td>&nbsp;&nbsp;<font face="Arial" size="4">Useful Code Snippets
	</font></td>
	<td width="2" bgcolor="#0099cc"></td><td width="2" bgcolor="#cccccc"></td>
</tr>
<tr>
	<td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" bgcolor="#0099cc"></td>
	<td height="2" width="2" bgcolor="#0099cc"></td>
	<td height="2" width="2" bgcolor="#cccccc"></td>
</tr>
<tr>
	<td height="2" width="2"></td>
	<td height="2" bgcolor="#cccccc"></td>
	<td height="2" width="2" bgcolor="#cccccc"></td>
	<td height="2" width="2" bgcolor="#cccccc"></td>
</tr>
</tbody></table>
<br>	<h4>Loop around a piece of code 42 times</h4>
	<code>&nbsp;&nbsp;&nbsp;MOV r0,#42<br>LOOP<br>&nbsp;&nbsp;&nbsp;...<br>&nbsp;&nbsp;&nbsp;SUBS r0,r0,#1<br>&nbsp;&nbsp;&nbsp;BNE	LOOP<br></code>

	<h4>Get one bit from an array in memory</h4>
	(at location r0 (returned in r0 as well))<br>
	<code>
	ldr		r1,=my_array<br>
	mov		r2,r0,LSR #3<br>
	ldrb	r3,[r1,r2]<br>
	and		r2,r0,#7<br>
	mov		r3,r3,LSR r2<br>
	and		r0,r3,#1<br></code>

	<h4>Set one bit in an array in memory</h4>
	(at location r0)<br>
	<code>
	ldr		r1,=my_array<br>
	ldrb	r2,[r1,r0,LSR #3]<br>
	and		r3,r0,#7<br>
	mov		r4,#1<br>
	mov		r3,r4,LSL r3<br>
	orr		r2,r2,r3<br>
	strb	r2,[r1,r0,LSR #3]<br></code>

	<h4>Call a function, preserving all registers</h4>
	<code>
	stmfd	sp!,{r0-r12,lr}<br>
	bl		my_function<br>
	ldmfd	sp!,{r0-r12,lr}<br></code>

<!-- end content --><!-- START OF STANDARD FOOTER-->
</td>
</tr></tbody></table>
<!-- end body text -->

<!-- footer -->
<br>
<table summary="footer" width="98%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr><td colspan="2" bgcolor="#0099cc"><img src="arm_ref_files/pixel.gif" class="block" alt="" height="4" width="1" border="0"></td>
</tr>
<tr><td colspan="2" bgcolor="#cccccc"><img src="arm_ref_files/pixel.gif" class="block" alt="" height="2" width="1" border="0"></td>
</tr>

<tr><td>
<div class="footer">
<!--Add Department name and email contact here-->
<p>© 2006 Simon Moore, Philip Wise, Gordon Williams, Daniel Hulme, Rosemary Francis<br>
Please send any comments to <a href="http://www.cl.cam.ac.uk/%7Eswm11/">Simon Moore</a><br>
Page last updated on 15-Sep-2006 at 10:09 by Simon Moore</p>
</div>
</td>
</tr>
</tbody></table>

<!--  end footer -->
</body></html>